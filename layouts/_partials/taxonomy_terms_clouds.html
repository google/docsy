{{ $context := . -}}

{{ if .Site.Params.taxonomy -}}
	{{ if .Site.Params.Taxonomy.taxonomyCloud -}}
		{{ range $index, $taxo := .Site.Params.Taxonomy.taxonomyCloud -}}

			{{ $title := (humanize $taxo) }}
			{{ with (index $.Site.Params.Taxonomy.taxonomyCloudTitleMap $taxo) }}
				{{ $title = . }}
			{{ else }}
				{{ with $.Site.Params.Taxonomy.taxonomyCloudTitle }}
					{{ if lt $index (len .) }}
						{{ $title = (index . $index) }}
					{{ end }}
				{{ end }}
			{{ end }}
			{{ $.Scratch.Set "title" $title }}

			{{ partial "taxonomy_terms_cloud.html" (dict "context" $context "taxo" $taxo "title" ($.Scratch.Get "title")) -}}
		{{ end }}
	{{ else -}}
		{{ range $taxo, $taxo_map := .Site.Taxonomies -}}
			{{ partial "taxonomy_terms_cloud.html" (dict "context" $context "taxo" $taxo "title" (humanize $taxo)) -}}
		{{ end }}
	{{ end -}}
{{ else -}}
	{{ range $taxo, $taxo_map := .Site.Taxonomies -}}
		{{ partial "taxonomy_terms_cloud.html" (dict "context" $context "taxo" $taxo "title" (humanize $taxo)) -}}
	{{ end }}
{{ end -}}
